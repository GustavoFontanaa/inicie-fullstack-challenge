import{a as _,b as f,c as w,d as C,f as E,g as I,h as N,i as F,k as L}from"./chunk-SUEMDGCN.js";import{$ as x,D as m,G as g,K as p,O as l,P as o,Q as t,R as c,V as v,X as b,Z as r,na as y,oa as h,r as u,va as S,za as M}from"./chunk-MXM4Q3JX.js";function G(i,e){i&1&&(o(0,"div",12),r(1," Email inv\xE1lido ou obrigat\xF3rio. "),t())}function T(i,e){i&1&&(o(0,"div",12),r(1," Senha obrigat\xF3ria. "),t())}function D(i,e){if(i&1&&(o(0,"div",13),r(1),t()),i&2){let a=b();m(),x(" ",a.errorMessage," ")}}var k=class i{form;errorMessage=null;fb=u(F);authService=u(M);router=u(S);constructor(){this.form=this.fb.group({email:["",[f.required,f.email]],password:["",[f.required]]})}ngOnInit(){localStorage.getItem("token")&&this.router.navigate(["/students"])}submit(){this.form.invalid||this.authService.login(this.form.value).subscribe({next:e=>{localStorage.setItem("token",e.access_token),localStorage.setItem("user",JSON.stringify(e.user)),this.router.navigate(["/students"])},error:e=>{e.status===403&&e.error.first_access?this.router.navigate(["/first-access"],{queryParams:{email:this.form.value.email}}):this.errorMessage="Credenciais inv\xE1lidas. Tente novamente."}})}static \u0275fac=function(a){return new(a||i)};static \u0275cmp=g({type:i,selectors:[["app-login"]],decls:18,vars:5,consts:[[1,"min-h-screen","flex","items-center","justify-center","bg-gray-100"],[1,"max-w-md","w-full","bg-white","p-8","shadow-md","rounded-sm"],[1,"text-2xl","font-semibold","mb-6","text-center","text-gray-800"],[3,"ngSubmit","formGroup"],[1,"mb-4"],["for","email",1,"block","mb-1","text-sm","font-medium"],["id","email","type","email","formControlName","email",1,"w-auto","sm:w-full","border","border-gray-300","rounded-sm","px-3","py-2"],["class","text-sm text-red-600 mt-1",4,"ngIf"],["for","password",1,"block","mb-1","text-sm","font-medium"],["id","password","type","password","formControlName","password",1,"w-auto","sm:w-full","border","border-gray-300","rounded-sm","px-3","py-2"],["type","submit",1,"w-full","text-sm","bg-blue-600","hover:bg-blue-700","text-white","font-medium","py-2","rounded","transition","disabled:opacity-50",3,"disabled"],["class","mt-4 text-red-600 text-center font-medium",4,"ngIf"],[1,"text-sm","text-red-600","mt-1"],[1,"mt-4","text-red-600","text-center","font-medium"]],template:function(a,n){if(a&1&&(o(0,"div",0)(1,"div",1)(2,"h2",2),r(3," Login "),t(),o(4,"form",3),v("ngSubmit",function(){return n.submit()}),o(5,"div",4)(6,"label",5),r(7," Email "),t(),c(8,"input",6),p(9,G,2,0,"div",7),t(),o(10,"div",4)(11,"label",8),r(12," Senha "),t(),c(13,"input",9),p(14,T,2,0,"div",7),t(),o(15,"button",10),r(16," Entrar "),t(),p(17,D,2,1,"div",11),t()()()),a&2){let s,d;m(4),l("formGroup",n.form),m(5),l("ngIf",((s=n.form.get("email"))==null?null:s.invalid)&&((s=n.form.get("email"))==null?null:s.touched)),m(5),l("ngIf",((d=n.form.get("password"))==null?null:d.invalid)&&((d=n.form.get("password"))==null?null:d.touched)),m(),l("disabled",n.form.invalid),m(2),l("ngIf",n.errorMessage)}},dependencies:[h,y,L,E,_,w,C,I,N],encapsulation:2})};export{k as LoginComponent};
